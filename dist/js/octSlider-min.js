"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var _slicedToArray=function(){function t(t,e){var n=[],r=!0,i=!1,a=void 0;try{for(var o,l=t[Symbol.iterator]();!(r=(o=l.next()).done)&&(n.push(o.value),!e||n.length!==e);r=!0);}catch(t){i=!0,a=t}finally{try{!r&&l.return&&l.return()}finally{if(i)throw a}}return n}return function(e,n){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return t(e,n);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),template={content:'<div class="octs-outter" aria-live="polite" >\n\t\t\t\t\t<ul class="octs-item-list" ></ul>\n\t\t\t\t\t<ul class="octs-navigator-list" ></ul>\n\t\t\t\t\t<div class="octs-button-group" >\n\t\t\t\t\t\t<button class="octs-button octs-button-prev" role="button" ></button>\n\t\t\t\t\t\t<button class="octs-button octs-button-next" role="button" ></button>\n\t\t\t\t\t</div>\n\t\t\t\t</div>',item:'<li class="octs-item" >\n\t\t\t\t<section class="octs-item-main" >\n\t\t\t\t\t<img src="" alt="" />\n\t\t\t\t</section>\n\t\t\t\t<footer class="octs-item-footer" >\n\t\t\t\t\t<a href="#"></a>\n\t\t\t\t</footer>\n\t\t\t</li>',navigator:'<li class="octs-navigator-item" role="button" ></li>'},parseDom=function(t){var e=document.createElement("div");return e.innerHTML=t,e.childNodes},genItemDom=function(t){var e=parseDom(template.item)[0],n=e.children[0].children[0],r=e.children[1].children[0];return n.src=t.img,n.alt=t.title,r.href=t.link,r.innerText=t.title,e},genNavigatorDom=function(t){var e=parseDom(template.navigator)[0];return e},insertItemDom=function(t,e){var n=t.children[0],r=!0,i=!1,a=void 0;try{for(var o,l=e.entries()[Symbol.iterator]();!(r=(o=l.next()).done);r=!0){var s=_slicedToArray(o.value,2),c=(s[0],s[1]),d=genItemDom(c);n.appendChild(d)}}catch(t){i=!0,a=t}finally{try{!r&&l.return&&l.return()}finally{if(i)throw a}}return t},insertNavigatorDom=function(t,e){var n=t.children[1],r=!0,i=!1,a=void 0;try{for(var o,l=e.entries()[Symbol.iterator]();!(r=(o=l.next()).done);r=!0){var s=_slicedToArray(o.value,2),c=s[0],d=s[1],v=genNavigatorDom(d);0===c&&v.classList.add("octs-navigator-item-active"),n.appendChild(v)}}catch(t){i=!0,a=t}finally{try{!r&&l.return&&l.return()}finally{if(i)throw a}}return t},removeNavigatorStatus=function(t){var e=t.children[1].children,n=!0,r=!1,i=void 0;try{for(var a,o=[].entries.call(e)[Symbol.iterator]();!(n=(a=o.next()).done);n=!0){var l=_slicedToArray(a.value,2),s=(l[0],l[1]);s.classList.remove("octs-navigator-item-active")}}catch(t){r=!0,i=t}finally{try{!n&&o.return&&o.return()}finally{if(r)throw i}}},slidePrev=function(t,e,n){for(var r=t.children[0],i=t.children[1],a=i.children[e],o=r.style.transition,l=getIndex(i,null,function(t){return t.classList.contains("octs-navigator-item-active")}),s=n?1:l-e,c=[].map.call(r.children,function(t){return t}),d=c.length-1,v=c[0],u=0;u<s;u++){var f=c[d-u];r.insertBefore(f,v),v=f}r.style.cssText="transition: none;\n\t\t\t\t\t\tmargin-left: -"+s+"00%;",setTimeout(function(){r.style.cssText="transition: "+o+";\n\t\t\t\t\t\t  \tmargin-left: 0%;";var e=function e(){removeNavigatorStatus(t),a.classList.add("octs-navigator-item-active"),t.slideOver=!0,r.removeEventListener("transitionend",e,!1)};r.addEventListener("transitionend",e,!1)},0),t.slideOver=!1},slideNext=function(t,e,n){var r=t.children[0],i=t.children[1],a=i.children[e],o=r.style.transition,l=getIndex(i,null,function(t){return t.classList.contains("octs-navigator-item-active")}),s=n?1:e-l,c=[].map.call(r.children,function(t){return t});r.style.marginLeft="-"+s+"00%";var d=function e(){for(var n=0;n<s;n++)r.appendChild(c[n]);r.style.cssText="transition: none;\n\t\t\t\t\t\t\tmargin-left: 0%;",setTimeout(function(){r.style.transition=o,removeNavigatorStatus(t),a.classList.add("octs-navigator-item-active"),t.slideOver=!0,r.removeEventListener("transitionend",e,!1)},0)};r.addEventListener("transitionend",d,!1),t.slideOver=!1},getIndex=function(t,e,n){var r=t.children,i=!0,a=!1,o=void 0;try{for(var l,s=[].entries.call(r)[Symbol.iterator]();!(i=(l=s.next()).done);i=!0){var c=_slicedToArray(l.value,2),d=c[0],v=c[1];if(e===v)return d;if(n&&n(v))return d}}catch(t){a=!0,o=t}finally{try{!i&&s.return&&s.return()}finally{if(a)throw o}}},addEventListener=function(t,e){var n=0,r=t.children[0].children.length;t.slideOver=!0;var i=t.children[2].children[0],a=t.children[2].children[1],o=t.children[1],l=!1,s=0;if(i.addEventListener("click",function(e){t.slideOver&&(n=n-1<0?r-1:n-1,n===r-1?slidePrev(t,n,!0):slidePrev(t,n,!1))},!1),a.addEventListener("click",function(e){t.slideOver&&(n=(n+1)%r,0===n?slideNext(t,n,!0):slideNext(t,n,!1))},!1),o.addEventListener("click",function(e){var r=e.target;if(t.slideOver&&"li"==r.tagName.toLowerCase()){var i=getIndex(o,r);i>n?(n=i,slideNext(t,n,!1)):i<n&&(n=i,slidePrev(t,n,!1))}},!1),t.addEventListener("mouseover",function(t){l=!0},!1),t.addEventListener("mouseout",function(t){l=!1},!1),e.autoRun){var c=function t(){l||(e.reverse?i.click():a.click()),s=setTimeout(t,e.time)};s=setTimeout(c,e.time)}return t},defaultSetting={autoRun:!1,reverse:!1,time:3e3},octSlider=function(t,e,n){n=Object.assign(defaultSetting,n);var r=parseDom(template.content)[0];r=insertItemDom(r,e),r=insertNavigatorDom(r,e),r=addEventListener(r,n),t.appendChild(r)};exports.default=octSlider;